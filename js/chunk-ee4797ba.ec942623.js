(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee4797ba"],{"263b":function(t,e,o){},"5ca4":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{id:"book-list",fluid:"",tag:"section"}},[o("h1",{staticClass:"text-center"},[t._v("Book List")]),o("v-row",[o("v-col",{staticClass:"text-left"},[o("v-btn",{staticClass:"mb-5",attrs:{id:"myButton",color:"primary",to:"/books/add"}},[t._v("Add!"),o("v-icon",[t._v("mdi-plus-box-multiple")])],1)],1),o("v-col",{staticClass:"text-right"},[o("v-dialog",{attrs:{persistent:"","max-width":"290",disabled:t.isValid},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[o("v-btn",t._g(t._b({attrs:{id:"deleteBook",color:"primary",dark:""}},"v-btn",a,!1),s),[t._v("\n            Delete! "),o("v-icon",[t._v("mdi-delete")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",{staticClass:"text-h5"},[t._v("\n            Use Google's location service?\n          ")]),o("v-card-text",[t._v("Let Google help apps determine location. This means sending\n            anonymous location data to Google, even when no apps are\n            running.")]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n              Disagree\n            ")]),o("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.deleteItem}},[t._v("\n              Agree\n            ")])],1)],1)],1)],1)],1),o("v-card",[o("v-card-title",[t._v("\n      Nutrition\n      "),o("v-spacer"),o("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search",filled:"",rounded:"",dense:"","single-line":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.seachItem.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.books,search:t.search,page:t.page,"items-per-page":t.limit,options:t.options,pageCount:t.numberOfPages,"server-items-length":t.totalPassengers,loading:t.loading},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"header.checkedAll",fn:function(e){e.header;return[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{change:function(e){var o=t.selectAll,s=e.target,a=!!s.checked;if(Array.isArray(o)){var i=null,n=t._i(o,i);s.checked?n<0&&(t.selectAll=o.concat([i])):n>-1&&(t.selectAll=o.slice(0,n).concat(o.slice(n+1)))}else t.selectAll=a}}})]}},{key:"body",fn:function(e){var s=e.items;return[o("tbody",t._l(s,(function(e){return o("tr",{key:e.id},[o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.bookIds,expression:"bookIds"}],attrs:{type:"checkbox"},domProps:{value:e._id,checked:Array.isArray(t.bookIds)?t._i(t.bookIds,e._id)>-1:t.bookIds},on:{change:[function(o){var s=t.bookIds,a=o.target,i=!!a.checked;if(Array.isArray(s)){var n=e._id,r=t._i(s,n);a.checked?r<0&&(t.bookIds=s.concat([n])):r>-1&&(t.bookIds=s.slice(0,r).concat(s.slice(r+1)))}else t.bookIds=i},t.afterChecked]}})]),o("td",[t._v(t._s(e.description))]),o("td",[t._v(t._s(e.author))]),o("td",[o("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(o){return o.stopPropagation(),t.showCover(e._id)}}},[t._v("\n    Open Image\n  ")])],1),e.owner?o("td",[t._v(t._s(e.owner.username))]):o("td",[t._v(" null ")]),e.category?o("td",[t._v(t._s(e.category.title))]):o("td",[t._v(" null ")]),o("td",[o("v-btn",{staticClass:"px-1 ml-1",attrs:{color:"success",fab:"","x-small":"",to:{name:"BookUpdate",params:{bookId:e._id}}}},[o("v-icon",[t._v("mdi-pencil")])],1)],1)])})),0)]}}])})],1),o("v-dialog",{attrs:{width:"unset"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[o("v-card",[o("v-card-title",{staticClass:"text-h5"},[t._v("\n        Use Google's location service?\n      ")]),t.urlImg.length?o("v-row",{staticClass:"justify-center",attrs:{"no-gutters":""}},t._l(t.urlImg,(function(t){return o("v-col",{key:t},[o("img",{staticStyle:{padding:"10px"},attrs:{src:"https://nodejs2021123456.herokuapp.com/"+t,width:"200px",height:"200px"}})])})),1):o("v-row",{staticClass:"justify-center",attrs:{"no-gutters":""}},[o("v-col",{attrs:{cols:"8"}},[o("v-img",{staticStyle:{padding:"10px"},attrs:{src:"https://nodejs2021123456.herokuapp.com/public/covers/noimg.jpg",width:"200px",height:"200px"}})],1)],1),o("v-row",{staticClass:"justify-center",attrs:{"no-gutters":""}},[o("v-btn",{attrs:{color:"green darken-1","right--text":""},on:{click:function(e){t.dialog2=!1}}},[t._v("\n          Close\n        ")])],1)],1)],1)],1)},a=[],i=o("2f62");const{booksApi:n}=o("f8c8");var r={name:"BookList",data(){return{headers:[{text:"dsada",align:"start",sortable:!1,value:"checkedAll"},{text:"Description",value:"description"},{text:"Author",value:"author"},{text:"Cover",value:"cover",sortable:!1},{text:"Owner",value:"owner",sortable:!1},{text:"Category",value:"category",sortable:!1},{text:"Action",value:"action",sortable:!1}],dialog:!1,dialog2:!1,search:"",books:[],bookIds:[],isValid:!0,booleanValue:!1,checkedAll:!1,limit:5,page:1,totalPassengers:0,options:{},sortBy:"_id",sortDesc:"-",numberOfPages:0,urlImg:[]}},mounted(){this.getBook()},watch:{options:{handler(t){this.page=t.page,this.limit=t.itemsPerPage,this.sortBy=t.sortBy[0]||"_id",this.sortDesc=!1===t.sortDesc[0]?"":"-",this.getBook()}},deep:!0},computed:{selectAll:{get:function(){return!!this.books&&this.bookIds.length===this.books.length},set:function(t){const e=[];t&&this.books.forEach(t=>{e.push(t._id)}),this.bookIds=e,this.afterChecked()}}},methods:{...Object(i["c"])({setBookList:"SET_BOOK_LIST"}),getBook:async function(){const t=await n.paging({search:this.search.trim(),page:this.page,limit:this.limit,sort_column:this.sortBy,sort_direction:this.sortDesc});if(200===t.data.code){const{docs:e,limit:o,page:s,totalDocs:a}=t.data.books;e.length?(this.page=s,this.numberOfPages=o,this.totalPassengers=a,this.books=e,console.log(this.books.category),this.setBookList(this.books)):this.$notificate.showMessage({content:"DATA NOT FOUND",color:"info"})}},deleteItem:async function(){this.dialog=!1;const t=await n.deleteBook({bookIds:this.bookIds});200===t.data.code&&(this.$notificate.showMessage({content:t.data.message,color:"info"}),this.getBook())},afterChecked(){this.bookIds.length?this.isValid=!1:this.isValid=!0},seachItem(){this.page=1,this.getBook()},showCover(t){this.urlImg=[],this.dialog2=!0,this.books.forEach(e=>{e._id===t&&(this.urlImg=e.cover)}),console.log(this.urlImg)}}},c=r,l=(o("f199"),o("9fac"),o("2877")),d=o("6544"),h=o.n(d),u=o("8336"),g=o("b0af"),v=o("99d9"),p=o("62ad"),k=o("a523"),m=o("8fea"),b=o("169a"),f=o("132d"),_=o("adda"),y=o("0fd9"),x=o("2fa4"),I=o("8654"),w=Object(l["a"])(c,s,a,!1,null,"587c4a0e",null);e["default"]=w.exports;h()(w,{VBtn:u["a"],VCard:g["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:p["a"],VContainer:k["a"],VDataTable:m["a"],VDialog:b["a"],VIcon:f["a"],VImg:_["a"],VRow:y["a"],VSpacer:x["a"],VTextField:I["a"]})},"907c":function(t,e,o){},"9fac":function(t,e,o){"use strict";o("263b")},f199:function(t,e,o){"use strict";o("907c")}}]);
//# sourceMappingURL=chunk-ee4797ba.ec942623.js.map