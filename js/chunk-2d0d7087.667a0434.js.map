{"version":3,"sources":["webpack:///./src/views/dashboard/books/Update.vue?8406","webpack:///src/views/dashboard/books/Update.vue","webpack:///./src/views/dashboard/books/Update.vue?99c2","webpack:///./src/views/dashboard/books/Update.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","ref","directives","name","rawName","value","expression","errors","collect","model","bookUpdate","callback","$$v","$set","categories","category","staticStyle","on","onFileChange","url","_l","item","cover","key","$event","preventDefault","validateForm","staticRenderFns","booksApi","categoriesApi","$_veeValidate","validator","data","files","created","async","getBookUpdate","getCategory","methods","scope","$validator","validateAll","then","result","$refs","formData","FormData","i","Object","keys","append","title","description","author","_id","result2","updateBook","code","$notificate","showMessage","content","message","color","$router","push","docs","map","console","log","findByBookId","bookId","$route","params","book","e","file","target","length","URL","createObjectURL","component","VBtn","VCardActions","VCard","VCol","VContainer","VImg","VRow","VSelect","VTextField"],"mappings":"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","file":"js/chunk-2d0d7087.667a0434.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"id\":\"book-update\",\"fluid\":\"\",\"tag\":\"section\"}},[_c('base-v-component',{attrs:{\"heading\":\"Books\",\"link\":\"components/books\"}}),_c('v-col',{staticClass:\"text-left\"},[_c('v-btn',{staticClass:\"mb-5\",attrs:{\"id\":\"myButton\",\"color\":\"primary\",\"to\":\"/books/list\"}},[_vm._v(\"CLick to view books list!\")])],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('base-material-card',{staticClass:\"px-5 py-3\",attrs:{\"color\":\"success\",\"icon\":\"mdi-email\",\"title\":\"BOOK UPDATE FORM\"}},[_c('form',{ref:\"bookForm\",staticClass:\"mt-5\",attrs:{\"id\":\"app\",\"data-vv-scope\":\"form-1\"}},[_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],attrs:{\"color\":\"secondary\",\"error-messages\":_vm.errors.collect('form-1.required'),\"data-vv-name\":\"required\",\"name\":\"title\",\"label\":\"title...\",\"prepend-icon\":\"mdi-face\"},model:{value:(_vm.bookUpdate.title),callback:function ($$v) {_vm.$set(_vm.bookUpdate, \"title\", $$v)},expression:\"bookUpdate.title\"}}),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],attrs:{\"color\":\"secondary\",\"error-messages\":_vm.errors.collect('form-1.required'),\"data-vv-name\":\"required\",\"name\":\"description\",\"label\":\"description...\",\"prepend-icon\":\"mdi-face-woman \"},model:{value:(_vm.bookUpdate.description),callback:function ($$v) {_vm.$set(_vm.bookUpdate, \"description\", $$v)},expression:\"bookUpdate.description\"}}),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],attrs:{\"color\":\"secondary\",\"error-messages\":_vm.errors.collect('form-1.required'),\"data-vv-name\":\"required\",\"name\":\"author\",\"label\":\"author...\",\"prepend-icon\":\"mdi-account\"},model:{value:(_vm.bookUpdate.author),callback:function ($$v) {_vm.$set(_vm.bookUpdate, \"author\", $$v)},expression:\"bookUpdate.author\"}}),_c('v-select',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"mb-8\",attrs:{\"color\":\"secondary\",\"items\":_vm.categories,\"item-text\":\"title\",\"item-value\":\"_id\",\"label\":\"category\",\"error-messages\":_vm.errors.collect('form-1.required'),\"data-vv-name\":\"required\"},model:{value:(_vm.bookUpdate.category._id),callback:function ($$v) {_vm.$set(_vm.bookUpdate.category, \"_id\", $$v)},expression:\"bookUpdate.category._id\"}}),_c('v-row',[_c('input',{ref:\"files\",staticStyle:{\"padding-left\":\"12px\"},attrs:{\"type\":\"file\",\"id\":\"cover\",\"name\":\"cover\",\"accept\":\"image/*\",\"multiple\":\"\"},on:{\"change\":_vm.onFileChange}})]),(_vm.url.length)?_c('v-row',_vm._l((_vm.url),function(item){return _c('v-col',{attrs:{\"cols\":\"2\"}},[_c('img',{staticStyle:{\"padding\":\"10px\"},attrs:{\"src\":item,\"width\":\"200px\",\"height\":\"200px\"}})])}),1):(_vm.bookUpdate.cover.length)?_c('v-row',_vm._l((_vm.bookUpdate.cover),function(item){return _c('v-col',{key:item,attrs:{\"cols\":\"2\"}},[_c('img',{staticStyle:{\"padding\":\"10px\"},attrs:{\"src\":'https://nodejs2021123456.herokuapp.com/' + item,\"width\":\"200px\",\"height\":\"200px\"}})])}),1):_c('v-row',[_c('v-col',{attrs:{\"cols\":\"2\"}},[_c('v-img',{staticStyle:{\"padding\":\"10px\"},attrs:{\"src\":\"https://nodejs2021123456.herokuapp.com/public/covers/noimg.jpg\",\"width\":\"200px\",\"height\":\"200px\"}})],1)],1),_c('v-card-actions',{staticClass:\"pl-0\"},[_c('v-btn',{attrs:{\"color\":\"success\",\"min-width\":\"100\"},on:{\"click\":function($event){$event.preventDefault();return _vm.validateForm('form-1')}}},[_vm._v(\"\\n              Submit\\n            \")])],1)],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container id=\"book-update\" fluid tag=\"section\">\n    <base-v-component heading=\"Books\" link=\"components/books\" />\n    <v-col class=\"text-left\">\n      <v-btn id=\"myButton\" color=\"primary\" class=\"mb-5\" to=\"/books/list\"\n        >CLick to view books list!</v-btn\n      >\n    </v-col>\n    <v-row>\n      <v-col cols=\"12\" md=\"12\">\n        <base-material-card\n          color=\"success\"\n          icon=\"mdi-email\"\n          title=\"BOOK UPDATE FORM\"\n          class=\"px-5 py-3\"\n        >\n          <form ref=\"bookForm\" class=\"mt-5\" id=\"app\" data-vv-scope=\"form-1\">\n            <v-text-field\n              color=\"secondary\"\n              v-model=\"bookUpdate.title\"\n              v-validate=\"'required'\"\n              :error-messages=\"errors.collect('form-1.required')\"\n              data-vv-name=\"required\"\n              name=\"title\"\n              label=\"title...\"\n              prepend-icon=\"mdi-face\"\n            />\n            <v-text-field\n              color=\"secondary\"\n              v-model=\"bookUpdate.description\"\n              v-validate=\"'required'\"\n              :error-messages=\"errors.collect('form-1.required')\"\n              data-vv-name=\"required\"\n              name=\"description\"\n              label=\"description...\"\n              prepend-icon=\"mdi-face-woman \"\n            />\n\n            <v-text-field\n              color=\"secondary\"\n              v-model=\"bookUpdate.author\"\n              v-validate=\"'required'\"\n              :error-messages=\"errors.collect('form-1.required')\"\n              data-vv-name=\"required\"\n              name=\"author\"\n              label=\"author...\"\n              prepend-icon=\"mdi-account\"\n            />\n\n            <v-select\n              class=\"mb-8\"\n              color=\"secondary\"\n              v-model=\"bookUpdate.category._id\"\n              v-validate=\"'required'\"\n              :items=\"categories\"\n              item-text=\"title\"\n              item-value=\"_id\"\n              label=\"category\"\n              :error-messages=\"errors.collect('form-1.required')\"\n              data-vv-name=\"required\"\n            ></v-select>\n            <v-row>\n              <input\n                style=\"padding-left: 12px\"\n                ref=\"files\"\n                type=\"file\"\n                id=\"cover\"\n                @change=\"onFileChange\"\n                name=\"cover\"\n                accept=\"image/*\"\n                multiple\n              />\n            </v-row>\n            <v-row v-if=\"url.length\">\n              <v-col cols=\"2\" v-for=\"item in url\">\n                <img\n                  :src=\"item\"\n                  width=\"200px\"\n                  height=\"200px\"\n                  style=\"padding: 10px\"\n                />\n              </v-col>\n            </v-row>\n            <v-row v-else-if=\"bookUpdate.cover.length\">\n              <v-col cols=\"2\" v-for=\"item in bookUpdate.cover\" :key=\"item\">\n                <img\n                  :src=\"'https://nodejs2021123456.herokuapp.com/' + item\"\n                  width=\"200px\"\n                  height=\"200px\"\n                  style=\"padding: 10px\"\n                />\n              </v-col>\n            </v-row>\n            <v-row v-else>\n              <v-col cols=\"2\">\n                <v-img\n                  src=\"https://nodejs2021123456.herokuapp.com/public/covers/noimg.jpg\"\n                  width=\"200px\"\n                  height=\"200px\"\n                  style=\"padding: 10px\"\n                >\n                </v-img>\n              </v-col>\n            </v-row>\n            <v-card-actions class=\"pl-0\">\n              <v-btn\n                color=\"success\"\n                min-width=\"100\"\n                @click.prevent=\"validateForm('form-1')\"\n              >\n                Submit\n              </v-btn>\n            </v-card-actions>\n          </form>\n        </base-material-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n<script>\nconst { booksApi, categoriesApi } = require(\"../../../apis\");\n\nexport default {\n  name: \"DashboardFormsRegularForms\",\n\n  $_veeValidate: {\n    validator: \"new\",\n  },\n  data: () => ({\n    bookUpdate: null,\n    categories: [],\n    url: [],\n    files: [],\n  }),\n  created: async function () {\n    this.getBookUpdate();\n    this.getCategory();\n  },\n  methods: {\n    validateForm(scope) {\n      this.$validator.validateAll(scope).then(async (result) => {\n        if (result) {\n          this.files = this.$refs.files.files;\n          const formData = new FormData();\n          if (this.files) {\n            for (const i of Object.keys(this.files)) {\n              formData.append(\"cover\", this.files[i]);\n            }\n          }\n          formData.append(\"title\", this.bookUpdate.title);\n          formData.append(\"description\", this.bookUpdate.description);\n          formData.append(\"author\", this.bookUpdate.author);\n          formData.append(\"category\", this.bookUpdate.category._id);\n\n          const result2 = await booksApi.updateBook(\n            this.bookUpdate._id,\n            formData\n          );\n          if (result2.data.code === 200) {\n            this.$notificate.showMessage({\n              content: result2.data.message,\n              color: \"info\",\n            });\n            this.$router.push(\"/books/list\");\n          } else {\n            this.$notificate.showMessage({\n              content: result2.data.message,\n              color: \"info\",\n            });\n          }\n        }\n      });\n    },\n    async getCategory() {\n      const result = await categoriesApi.getCategory();\n      if (result.data.code === 200) {\n        result.data.categories.docs.map((item) => this.categories.push({ title: item.title, _id: item._id }));\n      }\n      console.log(this.categories);\n    },\n    async getBookUpdate() {\n      const result = await booksApi.findByBookId({\n        bookId: this.$route.params.bookId,\n      });\n      if (result.data.code === 200) {\n        this.bookUpdate = result.data.book[0];\n      }\n    },\n    onFileChange(e) {\n      this.url = [];\n      const file = e.target.files;\n      for (let i = 0; i < file.length; i++) {\n        this.url.push(URL.createObjectURL(file[i]));\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Update.vue?vue&type=template&id=1dd00d92&\"\nimport script from \"./Update.vue?vue&type=script&lang=js&\"\nexport * from \"./Update.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCardActions,VCol,VContainer,VImg,VRow,VSelect,VTextField})\n"],"sourceRoot":""}