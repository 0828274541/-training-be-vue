(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7087"],{"74a5":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{id:"book-update",fluid:"",tag:"section"}},[a("base-v-component",{attrs:{heading:"Books",link:"components/books"}}),a("v-col",{staticClass:"text-left"},[a("v-btn",{staticClass:"mb-5",attrs:{id:"myButton",color:"primary",to:"/books/list"}},[e._v("CLick to view books list!")])],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"12"}},[a("base-material-card",{staticClass:"px-5 py-3",attrs:{color:"success",icon:"mdi-email",title:"BOOK UPDATE FORM"}},[a("form",{ref:"bookForm",staticClass:"mt-5",attrs:{id:"app","data-vv-scope":"form-1"}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"secondary","error-messages":e.errors.collect("form-1.required"),"data-vv-name":"required",name:"title",label:"title...","prepend-icon":"mdi-face"},model:{value:e.bookUpdate.title,callback:function(t){e.$set(e.bookUpdate,"title",t)},expression:"bookUpdate.title"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"secondary","error-messages":e.errors.collect("form-1.required"),"data-vv-name":"required",name:"description",label:"description...","prepend-icon":"mdi-face-woman "},model:{value:e.bookUpdate.description,callback:function(t){e.$set(e.bookUpdate,"description",t)},expression:"bookUpdate.description"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{color:"secondary","error-messages":e.errors.collect("form-1.required"),"data-vv-name":"required",name:"author",label:"author...","prepend-icon":"mdi-account"},model:{value:e.bookUpdate.author,callback:function(t){e.$set(e.bookUpdate,"author",t)},expression:"bookUpdate.author"}}),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mb-8",attrs:{color:"secondary",items:e.categories,"item-text":"title","item-value":"_id",label:"category","error-messages":e.errors.collect("form-1.required"),"data-vv-name":"required"},model:{value:e.bookUpdate.category._id,callback:function(t){e.$set(e.bookUpdate.category,"_id",t)},expression:"bookUpdate.category._id"}}),a("v-row",[a("input",{ref:"files",staticStyle:{"padding-left":"12px"},attrs:{type:"file",id:"cover",name:"cover",accept:"image/*",multiple:""},on:{change:e.onFileChange}})]),e.url.length?a("v-row",e._l(e.url,(function(e){return a("v-col",{attrs:{cols:"2"}},[a("img",{staticStyle:{padding:"10px"},attrs:{src:e,width:"200px",height:"200px"}})])})),1):e.bookUpdate.cover.length?a("v-row",e._l(e.bookUpdate.cover,(function(e){return a("v-col",{key:e,attrs:{cols:"2"}},[a("img",{staticStyle:{padding:"10px"},attrs:{src:"https://nodejs2021123456.herokuapp.com/"+e,width:"200px",height:"200px"}})])})),1):a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("v-img",{staticStyle:{padding:"10px"},attrs:{src:"https://nodejs2021123456.herokuapp.com/public/covers/noimg.jpg",width:"200px",height:"200px"}})],1)],1),a("v-card-actions",{staticClass:"pl-0"},[a("v-btn",{attrs:{color:"success","min-width":"100"},on:{click:function(t){return t.preventDefault(),e.validateForm("form-1")}}},[e._v("\n              Submit\n            ")])],1)],1)])],1)],1)],1)},i=[];const{booksApi:r,categoriesApi:s}=a("f8c8");var d={name:"DashboardFormsRegularForms",$_veeValidate:{validator:"new"},data:()=>({bookUpdate:null,categories:[],url:[],files:[]}),created:async function(){this.getBookUpdate(),this.getCategory()},methods:{validateForm(e){this.$validator.validateAll(e).then(async e=>{if(e){this.files=this.$refs.files.files;const e=new FormData;if(this.files)for(const a of Object.keys(this.files))e.append("cover",this.files[a]);e.append("title",this.bookUpdate.title),e.append("description",this.bookUpdate.description),e.append("author",this.bookUpdate.author),e.append("category",this.bookUpdate.category._id);const t=await r.updateBook(this.bookUpdate._id,e);200===t.data.code?(this.$notificate.showMessage({content:t.data.message,color:"info"}),this.$router.push("/books/list")):this.$notificate.showMessage({content:t.data.message,color:"info"})}})},async getCategory(){const e=await s.getCategory();200===e.data.code&&e.data.categories.docs.map(e=>this.categories.push({title:e.title,_id:e._id})),console.log(this.categories)},async getBookUpdate(){const e=await r.findByBookId({bookId:this.$route.params.bookId});200===e.data.code&&(this.bookUpdate=e.data.book[0])},onFileChange(e){this.url=[];const t=e.target.files;for(let a=0;a<t.length;a++)this.url.push(URL.createObjectURL(t[a]))}}},c=d,l=a("2877"),n=a("6544"),p=a.n(n),u=a("8336"),v=a("99d9"),m=a("62ad"),h=a("a523"),b=a("adda"),f=a("0fd9"),g=a("b974"),k=a("8654"),w=Object(l["a"])(c,o,i,!1,null,null,null);t["default"]=w.exports;p()(w,{VBtn:u["a"],VCardActions:v["a"],VCol:m["a"],VContainer:h["a"],VImg:b["a"],VRow:f["a"],VSelect:g["a"],VTextField:k["a"]})}}]);
//# sourceMappingURL=chunk-2d0d7087.667a0434.js.map